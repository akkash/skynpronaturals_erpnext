[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2016-12-01 15:12:16.041897", 
  "name": "Sales Invoice-Client", 
  "script": "frappe.ui.form.on(\"Sales Invoice Item\", \"item_code\", function(frm, cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\td[\"warehouse\"] = cur_frm.doc.spn_warehouse;\n});\n\nfrappe.ui.form.on(\"Sales Invoice\", \"spn_warehouse\", function(frm) {\n    if(frm.doc.spn_warehouse && frm.doc.territory && frm.doc.customer_group) {\n        items = frm.doc.items;\n        for (var i=0; i <= items.length - 1; i++) {\n            items[i].warehouse = cur_frm.doc.spn_warehouse;\n        }\n        \n        //Fetch and set letterhead\n        frappe.call({\n            method: \"skynpronaturals_erpnext.api.get_spn_letter_head\",\n            args: {spn_warehouse: frm.doc.spn_warehouse }, \n            callback: function(r) {\n                if (!r.exc) {\n                    cur_frm.set_value(\"letter_head\", r.message);\n                } else {\n                    frappe.msgprint(\"Check letterhead field in selected Warehouse.\")\n                }\n            }\n        });\n        \n            frappe.call({\n                method: \"skynpronaturals_erpnext.api.get_naming_series\",\n                args: { \n                 \"spn_warehouse\": frm.doc.spn_warehouse,\n                 \"cust_ter\": frm.doc.territory,\n                 \"cust_group\": frm.doc.customer_group\n                },\n                callback: function(r){\n                    //frappe.msgprint(r);\n                    cur_frm.set_value(\"naming_series\", r.message);\n                }\n            });\n        \n        //Fetch terms by territory and set.\n        frappe.call({\n            method: \"skynpronaturals_erpnext.api.get_terms_by_warehouse_state\",\n            args: { \n             \"spn_warehouse\": frm.doc.spn_warehouse\n            },\n            callback: function(r){\n            \n                cur_frm.set_value(\"tc_name\", r.message);\n            }\n        });\n    }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Receipt", 
  "modified": "2016-12-01 16:49:38.375732", 
  "name": "Purchase Receipt-Client", 
  "script": "frappe.ui.form.on(\"Purchase Receipt\", \"spn_warehouse\", function(frm) {\n    if(frm.doc.spn_warehouse) {\n        items = frm.doc.items;\n        for (var i=0; i <= items.length - 1; i++) {\n            items[i].warehouse = cur_frm.doc.spn_warehouse;\n        }\n        \n        //Fetch and set letterhead\n        frappe.call({\n            method: \"skynpronaturals_erpnext.api.get_spn_letter_head\",\n            args: {spn_warehouse: frm.doc.spn_warehouse }, \n            callback: function(r) {\n                if (!r.exc) {\n                    cur_frm.set_value(\"letter_head\", r.message);\n                } else {\n                    frappe.msgprint(\"Check letterhead field in selected Warehouse.\")\n                }\n            }\n        });\n       }\n});", 
  "script_type": "Client"
 }
]